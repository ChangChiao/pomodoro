{"version":3,"sources":["MainPanel.js","store/Reducer.js","TodoList.js","App.js","reportWebVitals.js","index.js"],"names":["MainPanel","forwardRef","props","ref","totalTime","useState","peroid","setPeroid","clockDate","setclockDate","clockTime","setclockTime","todoList","useSelector","state","isRunning","dispatch","useDispatch","intervalId","useRef","clockId","useImperativeHandle","resetTimer","setIsRunning","boolean","type","payload","addZero","num","str","toString","length","isDelete","clearInterval","current","index","firstItem","useMemo","isRelaxTime","showIcon","status","isWork","process","useEffect","setInterval","Date","toLocaleDateString","toLocaleTimeString","className","timeStamp","mm","Math","floor","ss","formateTime","onClick","alert","startTime","getTime","nowTime","distance","countDown","src","alt","evt","ADD_TODOLIST","DELETE_TODOLIST","REVISE_TODOLIST","REVISEDONE_TODOLIST","ADD_DONELIST","REVISE_ISRUNNING","initState","doneList","reducer","action","arrTodo","push","title","isEdit","splice","forEach","ele","i","name","arrDone","TodoList","setTitle","setName","setStatus","addTodoList","changeTab","value","onKeyPress","event","charCode","onChange","e","target","map","val","setReset","k","store","createStore","App","mainRef","console","log","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.11030378.chunk.js","sourcesContent":["import { useEffect, useState, useRef, useMemo, useImperativeHandle, forwardRef} from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst MainPanel = forwardRef((props, ref) => {\n    const totalTime = 25 * 60 * 1000\n    const relaxTime = 5 * 60 * 1000\n    // const totalTime = 1 * 60 * 1000\n    // const relaxTime = 0.5 * 60 * 1000\n    const [peroid, setPeroid] = useState(totalTime);\n    const [clockDate, setclockDate] = useState('')\n    const [clockTime, setclockTime] = useState('')\n    const todoList = useSelector(state => state.todoList);\n    const isRunning = useSelector(state => state.isRunning)\n    const dispatch = useDispatch();\n    \n    let intervalId = useRef(null)\n    let clockId = useRef(null)\n\n    useImperativeHandle(ref, () => ({\n        resetTimer\n    }))\n\n\n    const countDown = () => {\n        const startTime = new Date().getTime()\n        intervalId.current = setInterval(() => {\n            const nowTime = new Date().getTime()\n            const distance = peroid - (nowTime - startTime)\n            // console.log('distance', distance);\n            setPeroid(distance)\n            if (distance <= 0) {\n                resetTimer()\n            }\n        }, 400);\n    }\n\n    const startTimer = () => {\n        clockId.current = setInterval(() => {\n            setclockDate(new Date().toLocaleDateString())\n            setclockTime(new Date().toLocaleTimeString())\n        }, 400);\n    }\n\n    const pauseTimer = () => {\n        if (isRunning) {\n            setIsRunning(false)\n            clearInterval(intervalId.current)\n        } else {\n            if (!firstItem) {\n                alert('請先新增待辦事項!')\n                return\n            }\n            setIsRunning(true)\n            countDown()\n        }\n    }\n\n    const setIsRunning = (boolean) => {\n        dispatch({\n            type: 'REVISE_ISRUNNING',\n            payload: { boolean },\n        });\n    }\n\n    const formateTime = (timeStamp) => {\n        const mm = Math.floor(timeStamp / (60 * 1000))\n        const ss = Math.floor((timeStamp - mm * 60 * 1000) / 1000)\n        return `${addZero(mm)}:${addZero(ss)}`\n    }\n    const addZero = (num) => {\n        const str = num.toString()\n        if (str.length === 1) return '0' + str\n        return str\n    }\n\n    const deleteItem = (index) => {\n        dispatch({\n            type: 'DELETE_TODOLIST',\n            payload: { index },\n        });\n    }\n\n    const handleReset = (evt, isDelete) =>{\n        resetTimer(isDelete)\n    }\n\n    const resetTimer = (isDelete) => {\n        if (todoList.length === 0) return\n        clearInterval(intervalId.current)\n        setPeroid(totalTime)\n        setIsRunning(false)\n        if (!isDelete) {\n            dispatch({\n                type: 'ADD_DONELIST',\n            });\n            deleteItem(0)\n        }\n    }\n\n\n    const firstItem = useMemo(() => {\n        return (todoList[0] && todoList[0]['title']) || null\n    }, [todoList])\n\n    const isRelaxTime = useMemo(() => {\n        return peroid < relaxTime\n    }, [peroid])\n\n    const showIcon = useMemo(() => {\n        const status = isRelaxTime ? 'green' : 'orange'\n        const isWork = isRunning ? 'pause' : 'play'\n        return `${process.env.PUBLIC_URL}/images/icon-${isWork}--${status}.svg`\n    }, [isRelaxTime, isRunning])\n\n    useEffect(() => {\n        startTimer()\n        return () => {\n            clearInterval(intervalId.current)\n            clearInterval(clockId.current)\n        }\n    }, [])\n\n    return (\n        <section>\n            <div className=\"time_zone\">\n                <span>{clockDate}</span>\n                <span>{clockTime}</span>\n            </div>\n            <h1 className=\"time\">Time:{formateTime(peroid)}</h1>\n            <h2>當前任務：{firstItem ? firstItem : '尚未新增待辦事項'}</h2>\n            {isRelaxTime ? (<h3>\n                <span>休息，</span>\n                是為了下一次的努力。\n            </h3>) : null}\n            <div className=\"btn_list\">\n                <button className=\"start\" onClick={pauseTimer} >\n                    <img src={showIcon} alt=\"\" />\n                </button>\n                {\n                    firstItem ? (<button onClick={handleReset}>\n                        <i className=\"fas fa-times\"></i>\n                    </button>) : null\n                }\n            </div>\n            <img className=\"tomato\" src={`${process.env.PUBLIC_URL}/images/tomato--${isRelaxTime ? 'green' : 'orange'}.svg`} />\n        </section>\n    )\n})\n\nexport default MainPanel","const ADD_TODOLIST = 'ADD_TODOLIST';\nconst DELETE_TODOLIST = 'DELETE_TODOLIST'\nconst REVISE_TODOLIST = 'REVISE_TODOLIST'\nconst REVISEDONE_TODOLIST = 'REVISEDONE_TODOLIST'\nconst ADD_DONELIST = 'ADD_DONELIST'\nconst REVISE_ISRUNNING = 'REVISE_ISRUNNING'\n\nconst initState = {\n    todoList: [],\n    doneList: [],\n    isRunning: false\n};\n\nconst reducer = (state = initState, action) => {\n    switch (action.type) {\n        case ADD_TODOLIST: {\n            const arrTodo = [...state.todoList];\n            arrTodo.push({ title: action.payload.title, isEdit: false });\n            return {\n                ...state,\n                todoList: arrTodo,\n            };\n        }\n        case DELETE_TODOLIST: {\n            const arrTodo = [...state.todoList];\n            arrTodo.splice(action.payload.index, 1)\n            return {\n                ...state,\n                todoList: arrTodo,\n            };\n        }\n\n        case REVISE_TODOLIST: {\n            const arrTodo = [...state.todoList];\n            arrTodo.forEach((ele, i) => {\n                arrTodo[i].isEdit = false\n            })\n            arrTodo[action.payload.index].isEdit = true\n            return {\n                ...state,\n                todoList: arrTodo,\n            };\n        }\n\n        case REVISEDONE_TODOLIST: {\n            const arrTodo = [...state.todoList];\n            arrTodo[action.payload.index].title = action.payload.name\n            arrTodo[action.payload.index].isEdit = false\n            return {\n                ...state,\n                todoList: arrTodo,\n            };\n        }\n\n        case ADD_DONELIST: {\n            const arrDone = [...state.doneList];\n            arrDone.push( state.todoList[0].title );\n            return {\n                ...state,\n                doneList: arrDone,\n            };\n        }\n\n        case REVISE_ISRUNNING:{\n            const boolean = action.payload.boolean\n            return {\n                ...state,\n                isRunning: boolean,\n            };\n        }\n        default:\n            return state;\n    }\n};\n\nexport default reducer","import { useState, useMemo } from \"react\"\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst TodoList = (props) => {\n    const todoList = useSelector(state => state.todoList);\n    const doneList = useSelector(state => state.doneList);\n    const isRunning = useSelector(state => state.isRunning)\n    const [title, setTitle] = useState('')\n    const [name, setName] = useState('')\n    const [status, setStatus] = useState(true)\n\n    const dispatch = useDispatch();\n\n    const addTodoList = () => {\n        dispatch({\n            type: 'ADD_TODOLIST',\n            payload: { title },\n        });\n        setTitle('')\n    };\n\n\n    const deleteItem = (index) => {\n        dispatch({\n            type: 'DELETE_TODOLIST',\n            payload: { index },\n        });\n        if (index === 0) props.setReset()\n    }\n\n    const reviseItem = (index) => {\n        const status = todoList[index].isEdit\n        if (status) {\n            dispatch({\n                type: 'REVISEDONE_TODOLIST',\n                payload: { index, name },\n            });\n        } else {\n            dispatch({\n                type: 'REVISE_TODOLIST',\n                payload: { index },\n            });\n            setName(todoList[index].title)\n        }\n    }\n\n    const changeTab = () => {\n        setStatus(!status)\n    }\n\n    const onKeyUp = (event) => {\n        if (event.charCode === 13) {\n            addTodoList()\n        }\n    }\n\n    // const peddingList = useMemo(() => {\n    //     return status ? todoList : doneList\n    // }, [status])\n\n    return (\n        <aside>\n            <header>\n                <h2>待辦清單</h2>\n                <div className=\"tab\">\n                    <span className={status ? 'active' : ''} onClick={changeTab}>未完成</span>\n                    <span className={!status ? 'active' : ''} onClick={changeTab}>已完成</span>\n                </div>\n            </header>\n            <div className=\"title_box\">\n                <input type=\"text\" value={title} onKeyPress={onKeyUp} onChange={e => setTitle(e.target.value)} />\n                <button className=\"add_btn\" onClick={addTodoList}>\n                    <i className=\"fas fa-plus\"></i>\n                </button>\n            </div>\n            <ul>\n                {status ? todoList.map((val, i) => {\n                    return (\n                        <li key={i}>\n                            {val.isEdit ? null : <span>{val.title} {isRunning && i === 0 ? <span className=\"ing\">(進行中)</span> : null}</span>}\n                            {val.isEdit ? <input type=\"text\" value={name} onChange={e => setName(e.target.value)} /> : null}\n                            <span>\n                                <img src={process.env.PUBLIC_URL + \"/images/icon-edit.svg\"} onClick={() => reviseItem(i)} alt=\"\" />\n                                <img src={process.env.PUBLIC_URL + \"/images/icon-delete.svg\"} onClick={() => deleteItem(i)} alt=\"\" />\n                            </span>\n                        </li>\n                    )\n                }) : doneList.map((ele, k) => {\n                    return (\n                        <li className=\"done_item\" key={k}>{ele}</li>\n                    )\n                })}\n            </ul>\n        </aside>\n    )\n}\n\nexport default TodoList","import './MainPanel'\nimport './scss/style.scss'\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport reducer from './store/Reducer';\nimport MainPanel from './MainPanel';\nimport TodoList from './TodoList';\nimport { useRef } from 'react';\n\nconst store = createStore(reducer);\n\nfunction App() {\n  const mainRef = useRef(null)\n\n  const reset = () => {\n    console.log('mainRef.current', mainRef.current)\n    mainRef.current.resetTimer(true)\n  }\n  \n  return (\n    <Provider store={store}>\n      <div className=\"App\">\n        <TodoList setReset={reset} />\n        <MainPanel ref={mainRef} />\n      </div>\n    </Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}